{"ast":null,"code":"import _objectSpread from \"/home/mdehaan51/highrev-projects/merch-designer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/mdehaan51/highrev-projects/merch-designer/client/src/components/DrawingComponents/TextElement.js\";\nimport React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport { Stage, Layer, Text, Transformer } from \"react-konva\";\n\nconst TextElement = ({\n  shapeProps,\n  isSelected,\n  onSelect,\n  onChange,\n  text,\n  style,\n  textProps,\n  id,\n  x,\n  y\n}) => {\n  const shapeRef = React.useRef();\n  const trRef = React.useRef();\n  React.useEffect(() => {\n    if (isSelected) {\n      // we need to attach transformer manually\n      trRef.current.setNode(shapeRef.current);\n      trRef.current.getLayer().batchDraw();\n    }\n  }, [isSelected]);\n  console.log(textProps);\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, React.createElement(Text, Object.assign({\n    text: text,\n    onClick: onSelect,\n    ref: shapeRef\n  }, textProps, {\n    x: x,\n    y: y //fontSize=\"12px\"\n    //fontWeight=\"200\"\n    //lineHeight=\"12px\"\n    //fontFamily=\"Anton\"\n    ,\n    draggable: true,\n    onDragEnd: e => {\n      onChange({\n        style: _objectSpread({}, textProps),\n        id: {\n          id\n        },\n        text: {\n          text\n        },\n        x: e.target.x(),\n        y: e.target.y()\n      });\n    },\n    onTransformEnd: e => {\n      // transformer is changing scale\n      const node = shapeRef.current;\n      const scaleX = node.scaleX();\n      const scaleY = node.scaleY(); // we will reset it back\n\n      node.scaleX(1);\n      node.scaleY(1);\n      onChange({\n        style: _objectSpread({}, textProps),\n        id: {\n          id\n        },\n        text: {\n          text\n        },\n        x: node.x(),\n        y: node.y(),\n        width: node.width() * scaleX,\n        height: node.height() * scaleY\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  })), isSelected && React.createElement(Transformer, {\n    ref: trRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }));\n};\n\nexport default TextElement;","map":{"version":3,"sources":["/home/mdehaan51/highrev-projects/merch-designer/client/src/components/DrawingComponents/TextElement.js"],"names":["React","Component","render","Stage","Layer","Text","Transformer","TextElement","shapeProps","isSelected","onSelect","onChange","text","style","textProps","id","x","y","shapeRef","useRef","trRef","useEffect","current","setNode","getLayer","batchDraw","console","log","e","target","node","scaleX","scaleY","width","height"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport { Stage, Layer, Text, Transformer } from \"react-konva\";\n\nconst TextElement = ({\n\tshapeProps,\n\tisSelected,\n\tonSelect,\n\tonChange,\n\ttext,\n\tstyle,\n\ttextProps,\n\tid,\n\tx,\n\ty\n}) => {\n\tconst shapeRef = React.useRef();\n\tconst trRef = React.useRef();\n\n\tReact.useEffect(() => {\n\t\tif (isSelected) {\n\t\t\t// we need to attach transformer manually\n\t\t\ttrRef.current.setNode(shapeRef.current);\n\t\t\ttrRef.current.getLayer().batchDraw();\n\t\t}\n\t}, [isSelected]);\n\n\tconsole.log(textProps);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Text\n\t\t\t\ttext={text}\n\t\t\t\tonClick={onSelect}\n\t\t\t\tref={shapeRef}\n\t\t\t\t{...textProps}\n\t\t\t\tx={x}\n\t\t\t\ty={y}\n\t\t\t\t//fontSize=\"12px\"\n\t\t\t\t//fontWeight=\"200\"\n\t\t\t\t//lineHeight=\"12px\"\n\t\t\t\t//fontFamily=\"Anton\"\n\n\t\t\t\tdraggable\n\t\t\t\tonDragEnd={e => {\n\t\t\t\t\tonChange({\n\t\t\t\t\t\tstyle: { ...textProps },\n\t\t\t\t\t\tid: { id },\n\t\t\t\t\t\ttext: { text },\n\t\t\t\t\t\tx: e.target.x(),\n\t\t\t\t\t\ty: e.target.y()\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonTransformEnd={e => {\n\t\t\t\t\t// transformer is changing scale\n\t\t\t\t\tconst node = shapeRef.current;\n\t\t\t\t\tconst scaleX = node.scaleX();\n\t\t\t\t\tconst scaleY = node.scaleY();\n\n\t\t\t\t\t// we will reset it back\n\t\t\t\t\tnode.scaleX(1);\n\t\t\t\t\tnode.scaleY(1);\n\t\t\t\t\tonChange({\n\t\t\t\t\t\tstyle: { ...textProps },\n\t\t\t\t\t\tid: { id },\n\t\t\t\t\t\ttext: { text },\n\t\t\t\t\t\tx: node.x(),\n\t\t\t\t\t\ty: node.y(),\n\t\t\t\t\t\twidth: node.width() * scaleX,\n\t\t\t\t\t\theight: node.height() * scaleY\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{isSelected && <Transformer ref={trRef} />}\n\t\t</React.Fragment>\n\t);\n};\n\nexport default TextElement;\n"]},"metadata":{},"sourceType":"module"}