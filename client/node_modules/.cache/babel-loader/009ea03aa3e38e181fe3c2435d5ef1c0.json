{"ast":null,"code":"var _jsxFileName = \"/home/mdehaan51/highrev-projects/park-builder/client/src/components/gridObjectItem.js\";\nimport React from \"react\";\nimport Draggable from \"react-draggable\";\nimport DeleteComponent from \"./DeleteComponent.js\";\nimport RotateObject from \"./RotateObject.js\";\n\nclass GridObjectItem extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.rotateObject = () => {\n      let rotation = this.state.rotation;\n      let newRotation = rotation + 90;\n      this.setState({\n        rotation: newRotation\n      });\n    };\n\n    this.deleteObject = id => {\n      console.log(\"DELETING OBJECT\");\n      this.props.deleteComponent(id);\n    };\n\n    this.onDragStart = (ev, id) => {\n      this.props.onDragStart(ev, id);\n    };\n\n    this.handleStop = (ev, width, height) => {\n      let left = ev.clientX;\n      let top = ev.clientY;\n      let right = left + width;\n      let bottom = top + height;\n      this.props.saveLocation(left, top, right, bottom);\n    };\n\n    this.selectElement = (ev, id) => {\n      console.log(\"selecting\" + id);\n      this.props.saveActiveItem(id); //if (this.props.currentlyActive == id) {\n\n      if (this.state.active === true) {\n        this.setState({\n          active: false\n        });\n      } else {\n        this.setState({\n          active: true\n        });\n        this.props.saveActiveItem(id); //}\n      }\n    };\n\n    this.state = {\n      itemLocations: [],\n      rotation: 0,\n      scale: 1,\n      active: false\n    };\n  }\n\n  componentDidMount(e) {\n    this.setState({\n      scale: this.props.scale\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.scale !== this.props.scale) {\n      this.setState({\n        scale: nextProps.scale\n      });\n    }\n  }\n\n  render() {\n    let itemWidth = this.props.width * this.state.scale;\n    let itemHeight = this.props.height * this.state.scale; //let rotation = this.state.rotation;\n\n    let containerSize = {\n      width: itemWidth + \"px\",\n      height: itemHeight + \"px\"\n    };\n\n    if (this.state.rotation === 90 || this.state.rotation === 270) {\n      containerSize = {\n        width: itemHeight + \"px\",\n        height: itemWidth + \"px\"\n      };\n    }\n\n    const size = {\n      width: itemWidth + \"px\",\n      height: itemHeight + \"px\",\n      transform: \"translate(-50%,-50%) rotate(\".concat(this.state.rotation, \"deg)\")\n    };\n    return React.createElement(Draggable, {\n      bounds: \"parent\",\n      defaultPosition: {\n        x: this.props.xLocation - itemWidth,\n        y: this.props.yLocation - itemHeight\n      },\n      grid: [1, 1],\n      scale: 1,\n      onStart: ev => this.onDragStart(ev, this.props.pieceId),\n      onDrag: this.onDrag,\n      onStop: ev => this.handleStop(ev, itemWidth, itemHeight),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"grid-item \".concat(this.state.active === true ? \"active\" : \"\"),\n      style: containerSize,\n      onClick: ev => this.selectElement(ev, this.props.pieceId),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"object-img\",\n      style: size,\n      alt: \"\",\n      draggable: true,\n      src: this.props.img,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), this.state.active ? React.createElement(\"div\", {\n      className: \"object-actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(DeleteComponent, {\n      deleteComponent: () => {\n        this.deleteObject(this.props.pieceId);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(RotateObject, {\n      rotateComponent: this.rotateObject,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })) : \"\"));\n  }\n\n}\n\nexport default GridObjectItem;","map":{"version":3,"sources":["/home/mdehaan51/highrev-projects/park-builder/client/src/components/gridObjectItem.js"],"names":["React","Draggable","DeleteComponent","RotateObject","GridObjectItem","Component","constructor","props","rotateObject","rotation","state","newRotation","setState","deleteObject","id","console","log","deleteComponent","onDragStart","ev","handleStop","width","height","left","clientX","top","clientY","right","bottom","saveLocation","selectElement","saveActiveItem","active","itemLocations","scale","componentDidMount","e","componentWillReceiveProps","nextProps","render","itemWidth","itemHeight","containerSize","size","transform","x","xLocation","y","yLocation","pieceId","onDrag","img"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,eAAP,MAA4B,sBAA5B;AACA,OAAOC,YAAP,MAAyB,mBAAzB;;AAEA,MAAMC,cAAN,SAA6BJ,KAAK,CAACK,SAAnC,CAA6C;AAC5CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;;AADkB,SAqBnBC,YArBmB,GAqBJ,MAAM;AACpB,UAAIC,QAAQ,GAAG,KAAKC,KAAL,CAAWD,QAA1B;AACA,UAAIE,WAAW,GAAGF,QAAQ,GAAG,EAA7B;AACA,WAAKG,QAAL,CAAc;AACbH,QAAAA,QAAQ,EAAEE;AADG,OAAd;AAGA,KA3BkB;;AAAA,SA6BnBE,YA7BmB,GA6BJC,EAAE,IAAI;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,WAAKT,KAAL,CAAWU,eAAX,CAA2BH,EAA3B;AACA,KAhCkB;;AAAA,SAkCnBI,WAlCmB,GAkCL,CAACC,EAAD,EAAKL,EAAL,KAAY;AACzB,WAAKP,KAAL,CAAWW,WAAX,CAAuBC,EAAvB,EAA2BL,EAA3B;AACA,KApCkB;;AAAA,SAsCnBM,UAtCmB,GAsCN,CAACD,EAAD,EAAKE,KAAL,EAAYC,MAAZ,KAAuB;AACnC,UAAIC,IAAI,GAAGJ,EAAE,CAACK,OAAd;AACA,UAAIC,GAAG,GAAGN,EAAE,CAACO,OAAb;AACA,UAAIC,KAAK,GAAGJ,IAAI,GAAGF,KAAnB;AACA,UAAIO,MAAM,GAAGH,GAAG,GAAGH,MAAnB;AACA,WAAKf,KAAL,CAAWsB,YAAX,CAAwBN,IAAxB,EAA8BE,GAA9B,EAAmCE,KAAnC,EAA0CC,MAA1C;AACA,KA5CkB;;AAAA,SA8CnBE,aA9CmB,GA8CH,CAACX,EAAD,EAAKL,EAAL,KAAY;AAC3BC,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAcF,EAA1B;AACA,WAAKP,KAAL,CAAWwB,cAAX,CAA0BjB,EAA1B,EAF2B,CAG3B;;AACA,UAAI,KAAKJ,KAAL,CAAWsB,MAAX,KAAsB,IAA1B,EAAgC;AAC/B,aAAKpB,QAAL,CAAc;AAAEoB,UAAAA,MAAM,EAAE;AAAV,SAAd;AACA,OAFD,MAEO;AACN,aAAKpB,QAAL,CAAc;AAAEoB,UAAAA,MAAM,EAAE;AAAV,SAAd;AACA,aAAKzB,KAAL,CAAWwB,cAAX,CAA0BjB,EAA1B,EAFM,CAGN;AACA;AACD,KAzDkB;;AAElB,SAAKJ,KAAL,GAAa;AACZuB,MAAAA,aAAa,EAAE,EADH;AAEZxB,MAAAA,QAAQ,EAAE,CAFE;AAGZyB,MAAAA,KAAK,EAAE,CAHK;AAIZF,MAAAA,MAAM,EAAE;AAJI,KAAb;AAMA;;AAEDG,EAAAA,iBAAiB,CAACC,CAAD,EAAI;AACpB,SAAKxB,QAAL,CAAc;AACbsB,MAAAA,KAAK,EAAE,KAAK3B,KAAL,CAAW2B;AADL,KAAd;AAGA;;AACDG,EAAAA,yBAAyB,CAACC,SAAD,EAAY;AACpC,QAAIA,SAAS,CAACJ,KAAV,KAAoB,KAAK3B,KAAL,CAAW2B,KAAnC,EAA0C;AACzC,WAAKtB,QAAL,CAAc;AAAEsB,QAAAA,KAAK,EAAEI,SAAS,CAACJ;AAAnB,OAAd;AACA;AACD;;AAwCDK,EAAAA,MAAM,GAAG;AACR,QAAIC,SAAS,GAAG,KAAKjC,KAAL,CAAWc,KAAX,GAAmB,KAAKX,KAAL,CAAWwB,KAA9C;AACA,QAAIO,UAAU,GAAG,KAAKlC,KAAL,CAAWe,MAAX,GAAoB,KAAKZ,KAAL,CAAWwB,KAAhD,CAFQ,CAGR;;AACA,QAAIQ,aAAa,GAAG;AACnBrB,MAAAA,KAAK,EAAEmB,SAAS,GAAG,IADA;AAEnBlB,MAAAA,MAAM,EAAEmB,UAAU,GAAG;AAFF,KAApB;;AAIA,QAAI,KAAK/B,KAAL,CAAWD,QAAX,KAAwB,EAAxB,IAA8B,KAAKC,KAAL,CAAWD,QAAX,KAAwB,GAA1D,EAA+D;AAC9DiC,MAAAA,aAAa,GAAG;AACfrB,QAAAA,KAAK,EAAEoB,UAAU,GAAG,IADL;AAEfnB,QAAAA,MAAM,EAAEkB,SAAS,GAAG;AAFL,OAAhB;AAIA;;AACD,UAAMG,IAAI,GAAG;AACZtB,MAAAA,KAAK,EAAEmB,SAAS,GAAG,IADP;AAEZlB,MAAAA,MAAM,EAAEmB,UAAU,GAAG,IAFT;AAGZG,MAAAA,SAAS,wCAAiC,KAAKlC,KAAL,CAAWD,QAA5C;AAHG,KAAb;AAMA,WACC,oBAAC,SAAD;AACC,MAAA,MAAM,EAAC,QADR;AAEC,MAAA,eAAe,EAAE;AAChBoC,QAAAA,CAAC,EAAE,KAAKtC,KAAL,CAAWuC,SAAX,GAAuBN,SADV;AAEhBO,QAAAA,CAAC,EAAE,KAAKxC,KAAL,CAAWyC,SAAX,GAAuBP;AAFV,OAFlB;AAMC,MAAA,IAAI,EAAE,CAAC,CAAD,EAAI,CAAJ,CANP;AAOC,MAAA,KAAK,EAAE,CAPR;AAQC,MAAA,OAAO,EAAEtB,EAAE,IAAI,KAAKD,WAAL,CAAiBC,EAAjB,EAAqB,KAAKZ,KAAL,CAAW0C,OAAhC,CARhB;AASC,MAAA,MAAM,EAAE,KAAKC,MATd;AAUC,MAAA,MAAM,EAAE/B,EAAE,IAAI,KAAKC,UAAL,CAAgBD,EAAhB,EAAoBqB,SAApB,EAA+BC,UAA/B,CAVf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAYC;AACC,MAAA,SAAS,sBACR,KAAK/B,KAAL,CAAWsB,MAAX,KAAsB,IAAtB,GAA6B,QAA7B,GAAwC,EADhC,CADV;AAIC,MAAA,KAAK,EAAEU,aAJR;AAKC,MAAA,OAAO,EAAEvB,EAAE,IAAI,KAAKW,aAAL,CAAmBX,EAAnB,EAAuB,KAAKZ,KAAL,CAAW0C,OAAlC,CALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOC;AACC,MAAA,SAAS,EAAC,YADX;AAEC,MAAA,KAAK,EAAEN,IAFR;AAGC,MAAA,GAAG,EAAC,EAHL;AAIC,MAAA,SAAS,MAJV;AAKC,MAAA,GAAG,EAAE,KAAKpC,KAAL,CAAW4C,GALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPD,EAcE,KAAKzC,KAAL,CAAWsB,MAAX,GACA;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,eAAD;AACC,MAAA,eAAe,EAAE,MAAM;AACtB,aAAKnB,YAAL,CAAkB,KAAKN,KAAL,CAAW0C,OAA7B;AACA,OAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,EAMC,oBAAC,YAAD;AAAc,MAAA,eAAe,EAAE,KAAKzC,YAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAND,CADA,GAUA,EAxBF,CAZD,CADD;AA0CA;;AA1H2C;;AA6H7C,eAAeJ,cAAf","sourcesContent":["import React from \"react\";\nimport Draggable from \"react-draggable\";\nimport DeleteComponent from \"./DeleteComponent.js\";\nimport RotateObject from \"./RotateObject.js\";\n\nclass GridObjectItem extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\titemLocations: [],\n\t\t\trotation: 0,\n\t\t\tscale: 1,\n\t\t\tactive: false\n\t\t};\n\t}\n\n\tcomponentDidMount(e) {\n\t\tthis.setState({\n\t\t\tscale: this.props.scale\n\t\t});\n\t}\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.scale !== this.props.scale) {\n\t\t\tthis.setState({ scale: nextProps.scale });\n\t\t}\n\t}\n\n\trotateObject = () => {\n\t\tlet rotation = this.state.rotation;\n\t\tlet newRotation = rotation + 90;\n\t\tthis.setState({\n\t\t\trotation: newRotation\n\t\t});\n\t};\n\n\tdeleteObject = id => {\n\t\tconsole.log(\"DELETING OBJECT\");\n\t\tthis.props.deleteComponent(id);\n\t};\n\n\tonDragStart = (ev, id) => {\n\t\tthis.props.onDragStart(ev, id);\n\t};\n\n\thandleStop = (ev, width, height) => {\n\t\tlet left = ev.clientX;\n\t\tlet top = ev.clientY;\n\t\tlet right = left + width;\n\t\tlet bottom = top + height;\n\t\tthis.props.saveLocation(left, top, right, bottom);\n\t};\n\n\tselectElement = (ev, id) => {\n\t\tconsole.log(\"selecting\" + id);\n\t\tthis.props.saveActiveItem(id);\n\t\t//if (this.props.currentlyActive == id) {\n\t\tif (this.state.active === true) {\n\t\t\tthis.setState({ active: false });\n\t\t} else {\n\t\t\tthis.setState({ active: true });\n\t\t\tthis.props.saveActiveItem(id);\n\t\t\t//}\n\t\t}\n\t};\n\n\trender() {\n\t\tlet itemWidth = this.props.width * this.state.scale;\n\t\tlet itemHeight = this.props.height * this.state.scale;\n\t\t//let rotation = this.state.rotation;\n\t\tlet containerSize = {\n\t\t\twidth: itemWidth + \"px\",\n\t\t\theight: itemHeight + \"px\"\n\t\t};\n\t\tif (this.state.rotation === 90 || this.state.rotation === 270) {\n\t\t\tcontainerSize = {\n\t\t\t\twidth: itemHeight + \"px\",\n\t\t\t\theight: itemWidth + \"px\"\n\t\t\t};\n\t\t}\n\t\tconst size = {\n\t\t\twidth: itemWidth + \"px\",\n\t\t\theight: itemHeight + \"px\",\n\t\t\ttransform: `translate(-50%,-50%) rotate(${this.state.rotation}deg)`\n\t\t};\n\n\t\treturn (\n\t\t\t<Draggable\n\t\t\t\tbounds=\"parent\"\n\t\t\t\tdefaultPosition={{\n\t\t\t\t\tx: this.props.xLocation - itemWidth,\n\t\t\t\t\ty: this.props.yLocation - itemHeight\n\t\t\t\t}}\n\t\t\t\tgrid={[1, 1]}\n\t\t\t\tscale={1}\n\t\t\t\tonStart={ev => this.onDragStart(ev, this.props.pieceId)}\n\t\t\t\tonDrag={this.onDrag}\n\t\t\t\tonStop={ev => this.handleStop(ev, itemWidth, itemHeight)}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={`grid-item ${\n\t\t\t\t\t\tthis.state.active === true ? \"active\" : \"\"\n\t\t\t\t\t}`}\n\t\t\t\t\tstyle={containerSize}\n\t\t\t\t\tonClick={ev => this.selectElement(ev, this.props.pieceId)}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"object-img\"\n\t\t\t\t\t\tstyle={size}\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\tdraggable\n\t\t\t\t\t\tsrc={this.props.img}\n\t\t\t\t\t/>\n\t\t\t\t\t{this.state.active ? (\n\t\t\t\t\t\t<div className=\"object-actions\">\n\t\t\t\t\t\t\t<DeleteComponent\n\t\t\t\t\t\t\t\tdeleteComponent={() => {\n\t\t\t\t\t\t\t\t\tthis.deleteObject(this.props.pieceId);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<RotateObject rotateComponent={this.rotateObject} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t\"\"\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</Draggable>\n\t\t);\n\t}\n}\n\nexport default GridObjectItem;\n"]},"metadata":{},"sourceType":"module"}